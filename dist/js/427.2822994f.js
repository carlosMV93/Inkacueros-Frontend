"use strict";(self["webpackChunktemplate_vue_platform"]=self["webpackChunktemplate_vue_platform"]||[]).push([[427],{4679:function(e,t,l){l.d(t,{M:function(){return n},Oi:function(){return r},XA:function(){return a},ve:function(){return d}});var o=l(1076);const i="http://67.207.87.64:8080/api";function n(e){return o.Z.post(`${i}/orders/`,e)}function a(e){return o.Z.post(`${i}/productsorder/`,e)}function r(e){return o.Z.post(`${i}/orderitem/`,e)}function d(){return o.Z.get(`${i}/order-items/`)}},3512:function(e,t,l){l.d(t,{y:function(){return n}});var o=l(2492),i=l.n(o);function n(e,t,l,o){i().fire({icon:t,html:`<p class="text-lg font-semibold">${l}</p>\n          <p class="text-base">${o}</p>`,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#006cac",reverseButtons:!0}).then((t=>{t.isConfirmed&&e()}))}},4511:function(e,t,l){l.d(t,{R:function(){return i}});var o=l(3512);function i(e){e&&400===e.status?(0,o.y)((()=>{}),"error","Solicitud incorrecta","Los datos proporcionados no son válidos"):(0,o.y)((()=>{}),"error","Error de conexión","Hubo un problema de conexión")}},3358:function(e,t,l){l.d(t,{Z:function(){return g}});var o=l(3396);const i=["src"],n=["src"],a=["src"],r=["src"];function d(e,t,l,d,s,u){return 7==l.product.id?((0,o.wg)(),(0,o.iD)("img",{key:0,src:s.producto1,alt:"",class:"w-full"},null,8,i)):8==l.product.id?((0,o.wg)(),(0,o.iD)("img",{key:1,src:s.producto2,alt:"",class:"w-full"},null,8,n)):5==l.product.id?((0,o.wg)(),(0,o.iD)("img",{key:2,src:s.producto3,alt:"",class:"w-full"},null,8,a)):6==l.product.id?((0,o.wg)(),(0,o.iD)("img",{key:3,src:s.producto4,alt:"",class:"w-full"},null,8,r)):(0,o.kq)("",!0)}var s=l(7636),u=l(9406),c=l(1289),m=l(2214),v={props:{product:Object},data(){return{producto1:s,producto2:u,producto3:c,producto4:m}}},p=l(89);const f=(0,p.Z)(v,[["render",d]]);var g=f},3427:function(e,t,l){l.r(t),l.d(t,{default:function(){return pe}});var o=l(3396),i=l(7139),n=l(870),a=l(5039),r=l(1888),d=l(3601),s=l(7325),u=l(1231),c=l(5869),m=l(9166),v=l(6107),p=l(9694),f=l(1629),g=l(1138),y=l(5935),_=l(4870),h=l(3766),b=l(1107),C=l(9888),w=l(131);const x=(0,h.U)({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>null==e||["start","end"].includes(e)},lineInset:{type:[String,Number],default:0},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...(0,m.l)(),...(0,p.f)(),...(0,g.Q)(),...(0,y.x$)()},"VTimeline"),V=(0,b.ev)()({name:"VTimeline",props:x(),setup(e,t){let{slots:l}=t;const{themeClasses:i}=(0,y.ER)(e),{densityClasses:n}=(0,p.t)(e),{rtlClasses:a}=(0,f.Vw)();(0,v.AF)({VTimelineDivider:{lineColor:(0,_.Vh)(e,"lineColor")},VTimelineItem:{density:(0,_.Vh)(e,"density"),lineInset:(0,_.Vh)(e,"lineInset")}});const r=(0,o.Fl)((()=>{const t=e.side?e.side:"default"!==e.density?"end":null;return t&&`v-timeline--side-${t}`})),d=(0,o.Fl)((()=>{const t=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return t;case"start":return t[0];case"end":return t[1];default:return null}}));return(0,C.L)((()=>(0,o.Wm)(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,d.value,{"v-timeline--inset-line":!!e.lineInset},i.value,n.value,r.value,a.value,e.class],style:[{"--v-timeline-line-thickness":(0,w.kb)(e.lineThickness)},e.style]},l))),{}}});var k=l(836),I=l(3289),W=l(2370),D=l(2465),S=l(4960),T=l(4231),z=l(9374);const U=(0,h.U)({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:S.lE,iconColor:String,lineColor:String,...(0,m.l)(),...(0,T.I)(),...(0,z.Z)(),...(0,D.c)()},"VTimelineDivider"),N=(0,b.ev)()({name:"VTimelineDivider",props:U(),setup(e,t){let{slots:l}=t;const{sizeClasses:i,sizeStyles:n}=(0,z.t)(e,"v-timeline-divider__dot"),{backgroundColorStyles:a,backgroundColorClasses:r}=(0,W.Y5)((0,_.Vh)(e,"dotColor")),{roundedClasses:d}=(0,T.b)(e,"v-timeline-divider__dot"),{elevationClasses:s}=(0,D.Y)(e),{backgroundColorClasses:u,backgroundColorStyles:c}=(0,W.Y5)((0,_.Vh)(e,"lineColor"));return(0,C.L)((()=>(0,o.Wm)("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class],style:e.style},[(0,o.Wm)("div",{class:["v-timeline-divider__before",u.value],style:c.value},null),!e.hideDot&&(0,o.Wm)("div",{key:"dot",class:["v-timeline-divider__dot",s.value,d.value,i.value],style:n.value},[(0,o.Wm)("div",{class:["v-timeline-divider__inner-dot",r.value,d.value],style:a.value},[l.default?(0,o.Wm)(k.z,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},l.default):(0,o.Wm)(I.t,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),(0,o.Wm)("div",{class:["v-timeline-divider__after",u.value],style:c.value},null)]))),{}}});var O=l(4544);const H=(0,h.U)({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:S.lE,iconColor:String,lineInset:[Number,String],...(0,m.l)(),...(0,O.x)(),...(0,D.c)(),...(0,T.I)(),...(0,z.Z)(),...(0,g.Q)()},"VTimelineItem"),Z=(0,b.ev)()({name:"VTimelineItem",props:H(),setup(e,t){let{slots:l}=t;const{dimensionStyles:i}=(0,O.$)(e),n=(0,_.XI)(0),a=(0,_.iH)();return(0,o.YP)(a,(e=>{e&&(n.value=e.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width??0)}),{flush:"post"}),(0,C.L)((()=>(0,o.Wm)("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot},e.class],style:[{"--v-timeline-dot-size":(0,w.kb)(n.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${(0,w.kb)(e.lineInset)})`:(0,w.kb)(0)},e.style]},[(0,o.Wm)("div",{class:"v-timeline-item__body",style:i.value},[l.default?.()]),(0,o.Wm)(N,{ref:a,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:l.icon}),"compact"!==e.density&&(0,o.Wm)("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&l.opposite?.()])]))),{}}}),F={class:"flex justify-center items-center p-10"},R={class:"w-[80%]"},$=(0,o._)("h1",{class:"text-center font-bold text-3xl py-3 text-gray-500"},"Checkout",-1),B={key:0,class:"px-[5rem] py-10"},P=(0,o._)("p",{class:"font-bold text-gray-500"},"Dirección de envio",-1),L={class:"grid grid-cols-2 gap-5"},j={class:"grid grid-cols-2 gap-5"},A={class:"grid grid-cols-2 gap-5"},E={class:"grid grid-cols-2 gap-5"},Y={class:"flex justify-end"},M={key:1,class:"px-[5rem] py-10"},q=(0,o._)("p",{class:"font-bold text-gray-500"},"Confirma tu pedido",-1),Q=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-left"},"Imagen"),(0,o._)("th",{class:"text-left"},"Producto"),(0,o._)("th",{class:"text-left"},"Cantidad"),(0,o._)("th",{class:"text-left"},"Subtotal")])],-1),X={class:"w-[5rem]"},K={class:"flex justify-end w-full"},G={class:"w-[15rem]"},J={class:"pt-3 pb-3"},ee={class:"flex flex-col border border-gray-400 rounded-lg"},te={class:"flex justify-between p-3 font-bold text-gray-500"},le=(0,o._)("span",null,"Total",-1),oe={class:"flex justify-end gap-3 pt-5"};function ie(e,t,l,m,v,p){const f=(0,o.up)("ImgComponentVue");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",F,[(0,o._)("div",R,[(0,o.Wm)(a._,{class:"mx-auto shadow-lg w-full"},{default:(0,o.w5)((()=>[$,(0,o.Wm)(V,{direction:"horizontal","line-inset":"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{"dot-color":"DIRECTION"==m.typeForm?"indigo":"grey"},{opposite:(0,o.w5)((()=>[(0,o.Uk)(" Dirección de envio ")])),_:1},8,["dot-color"]),(0,o.Wm)(Z,{"dot-color":"CONFIRM"==m.typeForm?"indigo":"grey"},{opposite:(0,o.w5)((()=>[(0,o.Uk)(" Confirma tu pedido ")])),_:1},8,["dot-color"])])),_:1}),"DIRECTION"==m.typeForm?((0,o.wg)(),(0,o.iD)("div",B,[P,(0,o._)("div",L,[(0,o._)("div",null,[(0,o.Wm)(c.h,{label:"Nombre",variant:"underlined",color:"indigo",modelValue:m.name,"onUpdate:modelValue":t[0]||(t[0]=e=>m.name=e),onInput:t[1]||(t[1]=e=>p.validateText("name"))},null,8,["modelValue"])]),(0,o._)("div",null,[(0,o.Wm)(c.h,{label:"Apellidos",variant:"underlined",color:"indigo",modelValue:m.lastName,"onUpdate:modelValue":t[2]||(t[2]=e=>m.lastName=e),onInput:t[3]||(t[3]=e=>p.validateText("lastName"))},null,8,["modelValue"])])]),(0,o._)("div",j,[(0,o.Wm)(c.h,{label:"Dirección",variant:"underlined",color:"indigo",modelValue:m.address1,"onUpdate:modelValue":t[4]||(t[4]=e=>m.address1=e)},null,8,["modelValue"]),(0,o.Wm)(c.h,{label:"DNI/RUC",variant:"underlined",color:"indigo",modelValue:m.dni,"onUpdate:modelValue":t[5]||(t[5]=e=>m.dni=e),type:"number"},null,8,["modelValue"])]),(0,o._)("div",A,[(0,o._)("div",null,[(0,o.Wm)(c.h,{label:"Ciudad",variant:"underlined",color:"indigo",modelValue:m.city,"onUpdate:modelValue":t[6]||(t[6]=e=>m.city=e),onInput:t[7]||(t[7]=e=>p.validateText("city"))},null,8,["modelValue"])]),(0,o._)("div",null,[(0,o.Wm)(c.h,{label:"Provincia",variant:"underlined",color:"indigo",modelValue:m.state,"onUpdate:modelValue":t[8]||(t[8]=e=>m.state=e),onInput:t[9]||(t[9]=e=>p.validateText("state"))},null,8,["modelValue"])])]),(0,o._)("div",E,[(0,o._)("div",null,[(0,o.Wm)(c.h,{label:"Codigo postal",variant:"underlined",color:"indigo",modelValue:m.zipcode,"onUpdate:modelValue":t[10]||(t[10]=e=>m.zipcode=e)},null,8,["modelValue"])]),(0,o._)("div",null,[(0,o.Wm)(c.h,{label:"País",variant:"underlined",color:"indigo",modelValue:m.country,"onUpdate:modelValue":t[11]||(t[11]=e=>m.country=e),onInput:t[12]||(t[12]=e=>p.validateText("country"))},null,8,["modelValue"])])]),(0,o._)("div",Y,[(0,o.Wm)(n.T,{size:"small",color:"indigo",onClick:m.nextStage},{default:(0,o.w5)((()=>[(0,o.Uk)("Siguiente")])),_:1},8,["onClick"])])])):(0,o.kq)("",!0),"CONFIRM"==m.typeForm?((0,o.wg)(),(0,o.iD)("div",M,[q,(0,o.Wm)(u.Y,null,{default:(0,o.w5)((()=>[Q,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(m.dataTrolley,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.product.id},[(0,o._)("td",null,[(0,o._)("div",X,[(0,o.Wm)(f,{product:e.product},null,8,["product"])])]),(0,o._)("td",null,(0,i.zw)(e.product.Name),1),(0,o._)("td",null,(0,i.zw)(e.amount),1),(0,o._)("td",null,(0,i.zw)(e.amount*e.product.Price),1)])))),128))])])),_:1}),(0,o._)("div",K,[(0,o._)("div",G,[(0,o._)("div",J,[(0,o._)("div",ee,[(0,o._)("div",te,[le,(0,o._)("span",null,"S/."+(0,i.zw)(m.cartSubtotal),1)])])])])]),(0,o._)("div",oe,[(0,o.Wm)(n.T,{size:"small",color:"indigo",variant:"tonal",onClick:t[13]||(t[13]=e=>m.typeForm="DIRECTION")},{default:(0,o.w5)((()=>[(0,o.Uk)("Retroceder")])),_:1}),(0,o.Wm)(n.T,{size:"small",color:"indigo",onClick:m.endOrder},{default:(0,o.w5)((()=>[(0,o.Uk)("Realizar orden")])),_:1},8,["onClick"])])])):(0,o.kq)("",!0)])),_:1})])]),(0,o.Wm)(d.B,{modelValue:m.dialogLoader,"onUpdate:modelValue":t[14]||(t[14]=e=>m.dialogLoader=e),scrim:!1,persistent:"",width:"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(a._,{color:"brown-darken-1"},{default:(0,o.w5)((()=>[(0,o.Wm)(r.Z,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Procesando... "),(0,o.Wm)(s.K,{indeterminate:"",color:"white",class:"mb-0"})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}l(560);var ne=l(3358),ae=l(2483),re=l(4239),de=l(3512),se=l(4679),ue=l(4511),ce={components:{ImgComponentVue:ne.Z},methods:{validateText(e){const t=/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]*$/;t.test(this[e])||(this[e]=this[e].replace(/[^A-Za-zÁÉÍÓÚáéíóúÑñ\s]/g,""))}},setup(){const e=(0,ae.tv)(),t=(0,_.iH)("DIRECTION"),l=(0,_.iH)([]),i=(0,_.iH)(""),n=(0,_.iH)(""),a=(0,_.iH)(""),r=(0,_.iH)(""),d=(0,_.iH)(""),s=(0,_.iH)(""),u=(0,_.iH)(""),c=(0,_.iH)(""),m=(0,_.iH)(!1);(0,o.bv)((()=>{l.value=re.Z.state.trolley.map((e=>({...e,amount:e.amount||1})))}));const v=(0,o.Fl)((()=>l.value.reduce(((e,t)=>e+t.amount*t.product.Price),0))),p=()=>{""!=i.value&&""!=n.value&&""!=a.value&&""!=r.value&&""!=s.value&&""!=u.value&&""!=c.value&&""!=d.value?t.value="CONFIRM":(0,de.y)((()=>{}),"warning","Advertencia","Rellene todos los campos")},f=async()=>{try{m.value=!0;const t={Delivery_Fee:"35",Order_Status:"in stock",address1:a.value,City:r.value,Country:s.value,Name:i.value+" "+n.value,State:u.value,Zipcode:c.value},o=await(0,se.M)(t);console.log(o.data.id);const v=(new Date).toISOString(),p=[];for(const e of l.value){const t={Amount:e.amount,TotalPrice:e.product.Price*e.amount,IdProduct:e.product.id,creationDate:v},l=await(0,se.XA)(t);p.push(l.data.id)}console.log("------------------------------------------3"),console.log(p);const f={IdProductsOrder:p,IdOrder:o.data.id,IdUser:re.Z.state.userId,IdentityDocument:d.value,PictureUrl:"img"};await(0,se.Oi)(f),(0,de.y)((()=>{re.Z.commit("setTrolley",[]),e.push("/products")}),"success","Logrado","Se ha registrado tu orden de compra correctamente"),m.value=!1}catch(t){m.value=!1,(0,ue.R)("Se ha generado un error inesperado")}};return{nextStage:p,endOrder:f,dialogLoader:m,cartSubtotal:v,dataTrolley:l,typeForm:t,dni:d,name:i,lastName:n,address1:a,city:r,country:s,state:u,zipcode:c}}},me=l(89);const ve=(0,me.Z)(ce,[["render",ie]]);var pe=ve},7636:function(e,t,l){e.exports=l.p+"img/image1.235aa933.png"},9406:function(e,t,l){e.exports=l.p+"img/image2.2735eb16.png"},1289:function(e,t,l){e.exports=l.p+"img/image3.08d30140.png"},2214:function(e,t,l){e.exports=l.p+"img/image4.4464639b.png"},1231:function(e,t,l){l.d(t,{Y:function(){return v},g:function(){return m}});var o=l(3396),i=l(9166),n=l(9694),a=l(1138),r=l(5935),d=l(3766),s=l(1107),u=l(9888),c=l(131);const m=(0,d.U)({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...(0,i.l)(),...(0,n.f)(),...(0,a.Q)(),...(0,r.x$)()},"VTable"),v=(0,s.ev)()({name:"VTable",props:m(),setup(e,t){let{slots:l}=t;const{themeClasses:i}=(0,r.ER)(e),{densityClasses:a}=(0,n.t)(e);return(0,u.L)((()=>(0,o.Wm)(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!l.top,"v-table--has-bottom":!!l.bottom,"v-table--hover":e.hover},i.value,a.value,e.class],style:e.style},{default:()=>[l.top?.(),l.default?(0,o.Wm)("div",{class:"v-table__wrapper",style:{height:(0,c.kb)(e.height)}},[(0,o.Wm)("table",null,[l.default()])]):l.wrapper?.(),l.bottom?.()]}))),{}}})}}]);
//# sourceMappingURL=427.2822994f.js.map